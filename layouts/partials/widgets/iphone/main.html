{{ $id := printf "%d" (now.UnixNano) }}
{{ $context := (dict
    "context" .context
    "params" .params
    "id" $id)
}}

<iphone-screen class="margin-x-auto default-margin-bottom">
  {{ partial "widgets/iphone/state" $context }}
  {{ partial "widgets/iphone/list" $context }}
  {{ partial "widgets/iphone/detail" $context }}
</iphone-screen>

{{ if hugo.IsServer }}
    <style>
        {{ partial "widgets/iphone/main.css" | safeCSS }}
        {{ partial "widgets/iphone/utilities.css" | safeCSS }}
    </style>
{{ else }}
    {{ if not (hugo.Store.Get "iphone-main-css-loaded") }}
        <style>
            {{ partial "widgets/iphone/main.css" | safeCSS }}
            {{ partial "widgets/iphone/utilities.css" | safeCSS }}
        </style>
        {{ hugo.Store.Set "iphone-main-css-loaded" true }}
    {{ end }}
{{ end }}
